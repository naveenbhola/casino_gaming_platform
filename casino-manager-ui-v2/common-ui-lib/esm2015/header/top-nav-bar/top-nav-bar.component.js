import { Component, Input } from '@angular/core';
import { NavigationEnd, Router, ActivatedRoute } from '@angular/router';
import { TranslateService } from '@ngx-translate/core';
import { RxStompService } from '@stomp/ng2-stompjs';
import { CommonTranslationService } from '../../common-translation/common-translation.service';
import { UtilityService } from '../../services/utility.service';
import { AuthService } from '../../services/Authentication/auth.service';
import { DecodedTokenService } from '../../services/Authentication/decoded-token.service';
import { LogoutUtilityService } from '../../services/logout-utility.service';
import { TopNavBarService } from '../../services/top-nav-bar.service';
import { TopologyService } from '../../services/topology.service';
import { TokenHandlingService } from '../../services/Authentication/token-handling.service';
export class TopNavBarComponent {
    constructor(_router, _route, translate, rxStompService, commonTranslationService, utilityService, authService, decodedTokenService, logoutService, topNavBarService, topologyService, tokenHandlingService) {
        this._router = _router;
        this._route = _route;
        this.translate = translate;
        this.rxStompService = rxStompService;
        this.commonTranslationService = commonTranslationService;
        this.utilityService = utilityService;
        this.authService = authService;
        this.decodedTokenService = decodedTokenService;
        this.logoutService = logoutService;
        this.topNavBarService = topNavBarService;
        this.topologyService = topologyService;
        this.tokenHandlingService = tokenHandlingService;
        this.getCurrentCalendarDate();
    }
    ngOnInit() {
        this._router.events.subscribe((e) => {
            if (e instanceof NavigationEnd) {
                if (this._router.url.includes('unauthorized-access')) {
                    this.hideAppSwitcher = true;
                }
                if (this._router.url.includes('/ppmaster') || this._router.url.includes('/login')) {
                    this.loginPagesFlag = true;
                }
                else {
                    this.loginPagesFlag = false;
                }
            }
        });
        this.getLastRefresh();
        this.getUserName();
        this.rxStompService.watch('/logout/logout-request')
            .subscribe((message) => {
            const decodedToken = this.decodedTokenService.getDecodedJwtToken();
            const messageData = message.body.substring(1);
            if (decodedToken && messageData.split(';')[0] === decodedToken.name) {
                this.logoutService.removeAndRedirect();
            }
            else if (!decodedToken) {
                this.logoutService.removeAndRedirect();
            }
        });
        this.hideLanguageMenu();
        this.checkIfConfigApp();
        this.getTopologyData();
    }
    ngOnChanges(changes) {
        if (changes.selectedGamingDay && changes.selectedGamingDay.currentValue !== undefined) {
            this.calendarDate = changes.selectedGamingDay.currentValue;
        }
    }
    getCurrentCalendarDate() {
        if (!this.calendarDate) {
            this.calendarDate = this.gamingDay;
        }
    }
    setCalendarGamingDay(index, gday) {
        this.calendarDate = gday;
        this.utilityService.updateGlobalCalendarGamingDay(gday);
        // this.selectedCalendarDate = index;
        // this.refresh();
    }
    getLastRefresh() {
        this.lastRefresh = localStorage.getItem('lastRefresh');
    }
    hideLanguageMenu() {
        const authValues = JSON.parse(localStorage.getItem('authValues'));
        if (authValues.clientId === 'lgn') {
            this.hideLanguage = true;
        }
    }
    checkIfConfigApp() {
        const authValues = JSON.parse(localStorage.getItem('authValues'));
        if (authValues.clientId === 'conf') {
            this.isConfigApp = true;
        }
    }
    getUserName() {
        const decodedToken = this.decodedTokenService.getDecodedJwtToken();
        if (!decodedToken) {
            this.topNavBarService.userDetailsObservable.subscribe(userDetails => {
                if (userDetails) {
                    this.showMenu = true;
                    this.userFirstName = userDetails.firstName;
                    this.userLastName = userDetails.lastName;
                }
                else {
                    this.showMenu = false;
                }
            });
        }
        else {
            if (this.tokenHandlingService.isTokenValid(this.decodedTokenService.getJwtToken())) {
                this.showMenu = true;
                this.userFirstName = decodedToken.firstName;
                this.userLastName = decodedToken.lastName;
            }
            else {
                this.showMenu = false;
            }
        }
    }
    logout() {
        sessionStorage.clear();
        /**
         * localStorage.clear();//GR-2903 comes due to GR-2777: it stop redirection because
         removeAndRedirect function does not have value of localstorage, so instead
         we can clear 'lastRefresh' in the removeAndRedirect in LogoutUtilityService.
         */
        this.logoutService.logout();
    }
    toggleTranslation() {
        const currentLanguage = this.translate.getDefaultLang() === 'en_US' ? 'zh_Hant' : 'en_US';
        sessionStorage.setItem('language', currentLanguage);
        this.commonTranslationService.languageChanged.next(currentLanguage);
        this.translate.setDefaultLang(currentLanguage);
    }
    refresh() {
        this._router.routeReuseStrategy.shouldReuseRoute = function () {
            return false;
        };
        const currentUrl = this._router.url + '?';
        this._router.navigateByUrl(currentUrl)
            .then(() => {
            const currentTime = new Date();
            localStorage.setItem('lastRefresh', currentTime.toString());
            this.getLastRefresh();
            this._router.navigated = false;
            if (this._router.url.includes('access_token')) {
                if (this._router.url.includes('/configuration/areas')) {
                    this._router.navigate(['/configuration/areas']);
                }
                if (this._router.url.includes('/overview')) {
                    this._router.navigate(['/overview']);
                }
            }
            else {
                this._router.navigate([this._router.url]);
            }
        });
    }
    getTopologyData() {
        if (!this.topologyService.topologyNodes) {
            this.topologyService.initialized.subscribe((value) => {
                if (value === 'nodesInitialized') {
                    this.initTopologyData();
                }
            });
        }
        else {
            this.initTopologyData();
        }
    }
    initTopologyData() {
        this.topologyData = this.topologyService.topologyNodes;
        this.companyName = this.topologyData[0][0].shortName;
    }
}
TopNavBarComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-top-nav-bar',
                template: "<nav class=\"top-nav__container\" role=\"heading\" aria-label=\"top-nav\">\n  <div class=\"top-nav__row\">\n\n    <!-- Logo and Breadcrumbs on Left -->\n    <div class=\"app-breadcrumb__wrapper\">\n        <app-breadcrumb [breadCrumbArray]=\"breadcrumbList\"></app-breadcrumb>\n    </div>\n\n    <!-- App Switcher icon and label on Center -->\n    <div class=\"app-switcher__wrapper app-switcher-hide\">\n      <app-switcher [currentAppCode]=\"appName\" *ngIf=\"appName && !hideAppSwitcher\"></app-switcher>\n    </div>\n\n    <!-- User profile and refresh button on Right -->\n    <div class=\"user-others__wrapper\">\n        <ul class=\"user-others__list\">\n\n          <!--\n          ** Following block contains Gaming Day, Roll Time and Roll Date. **\n          ** It is visible only on roleDateTImeCal condition. **\n          -->\n            <!--Gaming Day Site-->\n            <li class=\"user-others__list__item\" *ngIf=\"showGamingDay\">\n              <div class=\"top-nav__list__item-content\"\n                   aria-label=\"Gaming Day\">\n                <span translate=\"application.app.common.labels.TOPNAV.GAMING_DAY\"></span>\n                <small>{{gamingDay | date : \"dd-MMM-yy\"}}</small>\n              </div>\n            </li>\n\n            <mat-divider [vertical]=\"true\" class=\"v-line\" *ngIf=\"showGamingDay\"></mat-divider>\n\n            <!--Roll Time-->\n            <li class=\"user-others__list__item\" *ngIf=\"showGamingDay\">\n              <div class=\"top-nav__list__item-content\"\n                   aria-label=\"Roll Time\">\n                <span translate=\"application.app.common.labels.TOPNAV.ROLL_TIME\"></span>\n                <small>{{nextRollTIme | date: 'HH:mm'}}</small>\n              </div>\n\n            </li>\n            <mat-divider [vertical]=\"true\" class=\"v-line\" *ngIf=\"showGamingDay\"></mat-divider>\n\n            <!--Current Calendar Date and List of Calendar Dates-->\n            <li class=\"user-others__list__item user-others__list__item--row\" *ngIf=\"showGamingDay\">\n              <a class=\"top-nav__list__item-link\"\n                 aria-label=\"Roll Day\"\n                 href=\"javascript: void(0)\"\n                 [matMenuTriggerFor]=\"rollday\">\n                <mat-icon class=\"icon-roll-day\">today</mat-icon>\n                <small *ngIf=\"calendarDate\"> {{calendarDate | date: 'dd-MMM'}} </small>\n                <small *ngIf=\"!calendarDate\"> {{gamingDay | date: 'dd-MMM'}} </small>\n                <mat-icon class=\"downarrow-icon\">arrow_drop_down</mat-icon>\n              </a>\n\n              <mat-menu #rollday=\"matMenu\" [overlapTrigger]=\"false\">\n                <button mat-menu-item class=\"top-nav__list__item-link\" role=\"menuitem\" *ngFor=\"let gDay of gamingDaysArr; let i = index\"\n                        (click)=\"setCalendarGamingDay(i, gDay)\">\n                  <span *ngIf=\"!calendarDate\" [ngClass]=\"{'calender_tick':gDay === gamingDay}\"></span>\n                  <span *ngIf=\"!calendarDate\">{{gDay | date: 'dd-MMM'}}</span>\n                  <span *ngIf=\"calendarDate\" [ngClass]=\"{'calender_tick':calendarDate === gDay}\"></span>\n                  <span *ngIf=\"calendarDate\">{{gDay | date: 'dd-MMM'}}</span>\n                </button>\n              </mat-menu>\n\n            </li>\n            <mat-divider [vertical]=\"true\" class=\"v-line\" *ngIf=\"showGamingDay\"></mat-divider>\n\n\n          <li class=\"user-others__list__item user-name\" *ngIf=\"showMenu\">\n            <button mat-button class=\"top-nav__list__item-link\"\n                    [matMenuTriggerFor]=\"usermenu\"\n                    color=\"primary\"\n                    aria-hasPopup=\"true\"\n                    role=\"menu\">{{userLastName}}, {{userFirstName}}\n              <mat-icon class=\"downarrow-icon\">arrow_drop_down</mat-icon>\n            </button>\n\n            <mat-menu #usermenu=\"matMenu\" [overlapTrigger]=\"false\">\n              <button *ngIf=\"!isConfigApp && !hideLanguage\" mat-menu-item role=\"menuitem\"  (click)=\"toggleTranslation()\">\n                <span *ngIf=\"translate.getDefaultLang() === 'en_US'\">Chinese</span>\n                <span *ngIf=\"translate.getDefaultLang() !== 'en_US'\">English</span>\n              </button>\n\n              <span *ngIf=\"!isConfigApp && !hideLanguage\"><mat-divider></mat-divider></span>\n\n              <button mat-menu-item role=\"menuitem\"\n                      (click)=\"logout()\"\n                      [translate]=\"'application.app.common.labels.TOPNAV.LOGOUT'\">Log Out</button>\n            </mat-menu>\n          </li>\n          <mat-divider [vertical]=\"true\" class=\"v-line\"></mat-divider>\n\n          <li class=\"user-others__list__item w-refresh\" *ngIf=\"(!hideLanguage || !showMenu) && !hideAppSwitcher && !loginPagesFlag\">\n            <a class=\"top-nav__list__item-link\"\n               href=\"javascript: void(0)\"\n               (click)=\"refresh()\">\n              <mat-icon>refresh</mat-icon>\n            </a>\n            <small *ngIf=\"lastRefresh\">{{lastRefresh | date: 'HH:mm'}}</small>\n          </li>\n        </ul>\n    </div>\n\n  </div>\n</nav>\n",
                styles: [".app-icons{display:flex;flex-wrap:wrap;justify-content:space-around}.app-icons .common-button,.app-icons .select-button{border:1px solid rgba(0,0,0,.1);font-weight:500;margin-bottom:1rem;margin-right:.5rem;max-width:10rem;padding:.25rem}.severity-icon{border-radius:50%;height:20px;width:20px}.severity-color__critical{background-color:#ff562d}.severity-color__high{background-color:#fbb03b}.severity-color__low{background-color:#0facd2}.severity-color__none{background-color:#ccc}.status-color__critical{color:#ff562d}.status-color__high{color:#fbb03b}.status-color__low{color:#0facd2}.status-color__active{color:#22b573}.status-color__inactive{color:#ccc}.mat-menu-item .severity-color__critical:not([color]){background-color:#ff562d}.mat-menu-item .severity-color__high:not([color]){background-color:#fbb03b}.mat-menu-item .severity-color__low:not([color]){background-color:#0facd2}.mat-menu-item .severity-color__none:not([color]){background-color:#ccc}.mat-menu-item .status-color__critical:not([color]){color:#ff562d}.mat-menu-item .status-color__high:not([color]){color:#fbb03b}.mat-menu-item .status-color__low:not([color]){color:#0facd2}.mat-menu-item .status-color__active:not([color]){color:#22b573}.mat-menu-item .status-color__inactive:not([color]){color:#ccc}.tbl-opened{background:radial-gradient(ellipse at top,#e6fbcb 0,#22b573 60%,#3ba211 100%);border:2px solid #000}.tbl-closed{background:radial-gradient(ellipse at top,#fff 0,#ff562d 100%);border:2px solid #7a191b}.icon__tbl-status{border-radius:50%;display:inline-block;height:32px;width:32px}@media only screen and (max-width:1368px) and (max-height:768px){.icon__tbl-status{height:28px;width:28px}}.icon__alerts{background:url(/assets/icons/icon-alerts-tbl.png) no-repeat 0;background-size:20px;height:24px;width:24px}.icon__chiptray-unlock{background:url(/assets/icons/icon-chiptray-unlock.png) no-repeat 50%;background-size:100%}.icon__chiptray-lock{background:url(/assets/icons/icon-chiptray-lock.png) no-repeat 50%;background-size:80%}.icon__cross{background:url(/assets/icons/cancelled.png) no-repeat 50%;background-size:80%}.icon__tick{background:url(/assets/icons/completed.png) no-repeat 50%;background-size:80%}.calender_tick{background:url(/assets/icons/icon-checked-green.svg) 50% no-repeat;height:16px;left:1rem;position:absolute;width:16px}.badge{border-radius:.25rem;display:inline-block;font-size:75%;font-weight:700;line-height:1;padding:.25em .4em;text-align:center;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;vertical-align:baseline;white-space:nowrap}.badge-critical{background-color:#ff562d;color:#000}.badge-high{background-color:#ff0;color:#000}.badge-low{background-color:#0facd2;color:#000}.chip-security-action-status{background-color:silver;border:2px solid #a9a9a9;border-radius:50%;display:inline-block;height:24px;margin-right:4%;min-width:24px}.chip-security-action-status--valid{background-color:#24ff00;border:2px solid #22b573}.chip-security-action-status--stolen{background-color:#ff562d;border:2px solid #9c1c23}.chip-security-action-status--cage-exchange{background-color:#fbb03b;border:2px solid #cc7e04}.chip-security-action-status--not-playable{background-color:#ffea00;border:2px solid #990}.chip-security-action-status--select{background-color:#ccc;border:2px solid grey}.cm-promotion-status-active{background:url(/assets/icons/icon-active.svg) 50% no-repeat;height:20px;width:20px}.cm-promotion-status-issued{background:url(/assets/icons/icon-issued.svg) 50% no-repeat;height:20px;width:20px}.cm-promotion-status-expired{background:url(/assets/icons/icon-expired.svg) 50% no-repeat;height:20px;width:20px}.cm-promotion-status-voided{background:url(/assets/icons/icon-voided.svg) 50% no-repeat;height:20px;width:20px}.fc-request-status-in-transit{background:url(/assets/icons/icon_in-transit.svg) 50% no-repeat;height:20px;width:20px}.fc-request-status-requested{background:url(/assets/icons/icon_requested.svg) 50% no-repeat;height:20px;width:20px}.fc-request-status-cancelled{background:url(/assets/icons/icon_cancelled.svg) 50% no-repeat;height:20px;width:20px}.fc-request-status-completed{background:url(/assets/icons/icon_completed.svg) 50% no-repeat;height:20px;width:20px}.fc-request-status-auto-cancelled{background:url(/assets/icons/icon_auto-cancelled.svg) 50% no-repeat;height:20px;width:20px}.fc-request-status-voided{background:url(/assets/icons/icon_voided.svg) 50% no-repeat;height:20px;width:20px}:root{--accent:#9c1c23;--accent-bright:#ff562d;--accent-dark:#7d161b;--black:#000;--blue:#00ceff;--blue-dark:#00a3cc;--cyan:#23a6ad;--danger:#dc3545;--dark:#333;--dark-light:grey;--gray30:#5a5858;--gray50:#817e7e;--gray80:#d9d8d8;--green-dark:#1c925d;--green-darker:#0a3321;--green-light:#b2f0d5;--info:#0facd2;--primary:#bb9156;--primary-beige:#f0edca;--primary-bg:#eee7dd;--primary-dark:#ab7348;--primary-light:#d9cb9e;--primary-lighten:#e0cdb2;--secondary:#ccc;--secondary-light:#e6e6e6;--success:#22b573;--success-bright:#24ff00;--warning:#fbb03b;--white:#fff;--white-text:#f5f5f5;--yellow:#ff0;--yellow-bright:#ffea00;--yellow-dark:#cc0}body,html{-webkit-font-smoothing:antialiased;font-family:Lato,sans-serif;font-size:16px;font-weight:600;margin:0}html{overflow:hidden!important}.mat-menu-item,.mat-menu-item:focus,a,a:focus,button,button:focus{outline:0!important}button{border-radius:4px}.app-switcher__wrapper.cdk-overlay-pane{position:relative;top:-18vh}.app-switcher__wrapper.cdk-overlay-pane .mat-dialog-container{padding:0!important;position:relative;top:0}::ng-deep .mat-tab-label,::ng-deep .mat-tab-link{font-size:15px;font-weight:600;line-height:inherit}@media only screen and (max-width:1024px) and (max-height:768px){::ng-deep .mat-tab-label,::ng-deep .mat-tab-link{font-size:1em}}.app-spinner{margin:25vh auto 0}.mat-header-cell{font-size:15px}@media only screen and (max-width:1024px) and (max-height:768px){.mat-header-cell{font-size:.8em}}::ng-deep .mat-sort-header-arrow .mat-sort-header-indicator,::ng-deep .mat-sort-header-arrow .mat-sort-header-stem{display:none}::ng-deep .mat-sort-header-sorted .mat-sort-header-arrow .mat-sort-header-indicator,::ng-deep .mat-sort-header-sorted .mat-sort-header-arrow .mat-sort-header-stem{display:block}.fixed-at-top,.sub-nav__fixed-at-top{left:0;position:fixed;top:0;width:100%;z-index:200}.sub-nav__fixed-at-top{top:50px}.wrapper__top-padding{position:relative;top:100px;z-index:100}.text-color__primary{color:#bb9156}::ng-deep .btn-progress-bar{margin-left:-1rem;margin-right:-1rem;min-width:70px;top:-.25rem}.dialog__title{border-bottom:1px solid rgba(0,0,0,.2);display:flex;width:100%}::ng-deep .mat-dialog-title.dialog__title{margin-bottom:10px}.notes__list-item__header-color{color:rgba(0,0,0,.5)}.list-item__wrapper,.text-area__wrapper{background-color:hsla(0,0%,90.2%,.16);border:1px solid #e6e6e6;border-radius:4px;margin-bottom:.5rem;margin-top:1rem;padding:.5rem .5rem 0;width:100%}.list-item__wrapper:first-child,.text-area__wrapper:first-child{margin-top:0}::ng-deep .mat-option .mat-pseudo-checkbox-checked:after{height:5px;top:3.4px;width:10px}::ng-deep .cdk-overlay-pane{max-width:90vw!important}::ng-deep .mat-header-cell,::ng-deep .mat-tab-label,::ng-deep .mat-tab-link{font-size:15px;font-weight:600}::ng-deep .mat-radio-outer-circle{background-color:#fff}.icon-tbl-properties,.icon__tbl-properties{font-size:18px}.icon__hovered{color:#e6e6e6}.icon__hovered:hover{color:#bb9156}.no-data-div,.show__no-data-txt{background-color:rgba(187,145,86,.15);border:1px solid rgba(187,145,86,.3);border-radius:4px;margin:2vh auto 0;max-height:62px;position:relative;text-align:center;top:0;width:50vw}.no-data-div h4,.show__no-data-txt h4{color:#9c1c23;font-size:1.5rem;font-weight:500;margin-bottom:0;margin-top:0;padding:1rem}.material-icons{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;direction:ltr;display:inline-block;font-family:Material Icons;font-feature-settings:\"liga\";font-size:24px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:1;text-rendering:optimizeLegibility;text-transform:none;white-space:nowrap;word-wrap:normal}.text-small{font-size:14px;font-weight:600}.text-base{font-size:16px;font-weight:600}.text-large{font-size:24px;font-weight:600}.text-xlarge{font-size:30px;font-weight:600}.common-button,.select-button{background-color:#fff;border-radius:4px;color:#bb9156;font-weight:600;line-height:2.5}.common-button:focus,.select-button:focus{outline:0}.common-button__sm{line-height:1;min-width:40px;padding:4px 0}.common-button__xsm{margin-left:.25rem;min-width:28px;padding:0}.common-button__xsm:first-child{margin-left:0}.common-button--primary{background-color:#bb9156;color:#fff}.common-button--secondary{border:2px solid #bb9156}.common-button--default{background-color:rgba(0,0,0,.15)}.select-button{min-width:60px}.close-btn{color:rgba(51,51,51,.6)}.close-btn:hover{color:#333}.footer-button__fixed{background-color:#fff;border:1px solid #e6e6e6;border-left:0;border-right:0;bottom:0;display:flex;padding:.5rem 1rem;position:fixed;width:100%;z-index:10}.table-properties__footer-button__margin{margin-left:-1rem}.manrate-button{border-radius:4px;font-size:20px;font-weight:600;min-height:64px;min-width:112px}.table-info__item{border-right:1px solid #fff;padding:0 16px}.table-info__item__left,.table-info__item__right{display:flex;flex-direction:row}.table-info__item__right{justify-content:flex-end}.table-info__item__right:last-child{border-right:0}.table-info__container{-ms-grid-columns:(minmax(80px,1fr))[2];-ms-grid-rows:24px;align-items:stretch;background-color:#000;color:#fff;display:-ms-grid;display:grid;grid-template-columns:repeat(2,minmax(80px,1fr));grid-template-rows:24px;justify-content:space-between}.chptray-chpset__form__select{background-color:#fff;border:2px solid grey;border-radius:4px;font-size:24px;font-weight:600;height:96px;letter-spacing:.2px;line-height:1;margin-bottom:8px;min-width:216px;padding:.5rem;text-align:left;width:100%}@media only screen and (max-width:1368px) and (max-height:768px){.chptray-chpset__form__select{font-size:20px;height:64px;height:72px;min-width:112px;padding:.25rem .5rem;width:100%}}.link-color__primary{color:#bb9156!important}.link-color__primary:hover{color:#7a191b!important}.refresh-btn{align-items:center;cursor:pointer!important;display:flex;height:24px;justify-content:center}.space-filler{flex-grow:1}.negative-value{color:#dc3522!important}.css--arrow-sign{background-color:#000;border-radius:8px;display:inline-block;height:4px;position:relative;width:24px}.css--arrow-sign:after,.css--arrow-sign:before{background-color:#000;border-radius:8px;content:\"\";height:4px;width:14px}.css--arrow-sign:before{position:absolute;right:-4px;top:-4px;transform:rotate(45deg)}.css--arrow-sign:after{position:absolute;right:-4px;top:4px;transform:rotate(-225deg)}.v-line,.vert-line{border-color:hsla(0,0%,100%,.2);color:#fff}.top-nav__container{background-color:#000;height:50px;left:0;margin:0;overflow:hidden;padding:0;position:fixed;top:0;width:100%;z-index:200}.top-nav__container .btn-link{color:#bb9156;cursor:default;font-family:Lato,sans-serif;line-height:1;min-width:40px;text-decoration:none}.top-nav__container .btn-link:hover{color:#9c1c23}.top-nav__row{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.app-breadcrumb__wrapper,.app-switcher__wrapper,.user-others__wrapper{display:flex;flex:2}.app-breadcrumb__wrapper{padding-left:1%}.app-switcher__wrapper{flex:1;justify-content:center}.user-others__wrapper{justify-content:flex-end;padding-right:1%}.user-others__wrapper .v-line{display:none}.logo-breadcrumbs__row{display:flex;flex-wrap:wrap}.brand-logo{align-items:center;background-color:hsla(0,0%,100%,.15);display:flex;justify-content:flex-start;margin-left:-1rem;padding:4px}.brand-logo__img{height:100%;margin-right:.25rem;padding:0;width:42px}.user-others__list{display:flex;flex:1;justify-content:flex-end;margin-bottom:0;margin-top:0;padding-left:0}.user-others__list__item{align-items:center;color:#fff;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;padding:0 2%;white-space:nowrap}.user-others__list__item--row{flex-direction:row}.user-others__list__item small{color:#fff;font-size:1em;font-weight:600;line-height:1;opacity:.6}.top-nav .mat-button,.top-nav button{font-size:15px;font-weight:600;height:50px}.top-nav .mat-button:hover,.top-nav button:hover{color:#9c1c23;text-decoration:none}.top-nav__list__item-content,.top-nav__list__item-link{align-items:center;color:hsla(0,0%,100%,.65);cursor:default;display:flex;flex-direction:column;font-size:13px;font-weight:600;justify-content:center;line-height:1.5}@media only screen and (max-width:1024px) and (max-height:768px){.top-nav__list__item-content,.top-nav__list__item-link{font-size:.7em}}.top-nav__list__item-link{color:#bb9156;cursor:pointer;flex-direction:row;text-decoration:none;width:100%}.top-nav__list__item-link:hover,.top-nav__list__item-link>small:hover{color:#9c1c23}.top-nav__list__item-link.mat-button{font-size:.8em;padding:0}.top-nav__list__item-link small{color:#bb9156;opacity:1}.w-refresh{flex:0}.w-refresh small{font-size:.9em;font-weight:600;line-height:1}.breadcrumbs__item:after,.breadcrumbs__item:not(:first-child) .breadcrumbs__item-link:before,span.breadcrumbs__item-link:before{border:20px solid transparent;border-left:10px solid hsla(0,0%,100%,.2);content:\"\";margin-left:-15px;margin-top:-2px;padding-left:1rem;position:absolute}.breadcrumbs{font-size:.8rem;font-weight:400;height:46px;list-style:none;margin:0;padding:2px}.breadcrumbs__item{background-color:hsla(0,0%,100%,.2);float:left;margin-left:2px;overflow:hidden;padding-left:1rem}.breadcrumbs__item-link{color:#bb9156;font-family:Lato,sans-serif;font-size:.8rem;font-weight:400;line-height:300%;padding-left:1rem;padding-right:1rem;text-decoration:none}.breadcrumbs__item-link:hover{color:#7a191b}.breadcrumbs__item:after{border-left-color:#000;margin-left:2px}.breadcrumbs__item:last-child:after{border-left-color:hsla(0,0%,100%,.2);margin-left:0}.breadcrumbs__item:not(:first-child) .breadcrumbs__item-link:before{margin-left:-34px}span.breadcrumbs__item-link,span.breadcrumbs__item-link:hover{color:#fff}span.breadcrumbs__item-link:before{margin-left:-34px}.company-name{color:#bb9156;font-size:inherit;font-weight:600}.top-nav__container ::ng-deep .mat-menu-panel{max-width:280px;min-width:224px;padding:8px 0}.top-nav__container ::ng-deep .mat-menu-panel.menu-panel-sm{max-width:280px;min-width:112px}.top-nav__container ::ng-deep .mat-menu-panel .mat-menu-item{color:#000;font-size:16px;font-size:20px;font-weight:600;height:56px;line-height:1}.top-nav__container ::ng-deep .mat-menu-panel .mat-menu-item[disabled=true],.top-nav__container ::ng-deep .mat-menu-panel .mat-menu-item[disabled]{color:grey}.top-nav__container ::ng-deep .mat-menu-panel .mat-divider{margin:4px 0}.icon-roll-day{font-size:20px;line-height:1.3}"]
            },] }
];
TopNavBarComponent.ctorParameters = () => [
    { type: Router },
    { type: ActivatedRoute },
    { type: TranslateService },
    { type: RxStompService },
    { type: CommonTranslationService },
    { type: UtilityService },
    { type: AuthService },
    { type: DecodedTokenService },
    { type: LogoutUtilityService },
    { type: TopNavBarService },
    { type: TopologyService },
    { type: TokenHandlingService }
];
TopNavBarComponent.propDecorators = {
    appName: [{ type: Input }],
    showGamingDay: [{ type: Input }],
    gamingDay: [{ type: Input }],
    nextRollTIme: [{ type: Input }],
    gamingDaysArr: [{ type: Input }],
    breadcrumbList: [{ type: Input }],
    selectedGamingDay: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9wLW5hdi1iYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY29tbW9uLXVpLXYyL3NyYy9hcHAvaGVhZGVyL3RvcC1uYXYtYmFyL3RvcC1uYXYtYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLEtBQUssRUFBb0IsTUFBTSxlQUFlLENBQUM7QUFDbEUsT0FBTyxFQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDdEUsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDckQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ2xELE9BQU8sRUFBQyx3QkFBd0IsRUFBQyxNQUFNLHFEQUFxRCxDQUFDO0FBQzdGLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUM5RCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sNENBQTRDLENBQUM7QUFDdkUsT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0scURBQXFELENBQUM7QUFDeEYsT0FBTyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sdUNBQXVDLENBQUM7QUFDM0UsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDcEUsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLGlDQUFpQyxDQUFDO0FBQ2hFLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBTzFGLE1BQU0sT0FBTyxrQkFBa0I7SUFzQjNCLFlBQW9CLE9BQWUsRUFDZixNQUFzQixFQUN2QixTQUEyQixFQUMxQixjQUE4QixFQUM5Qix3QkFBa0QsRUFDbEQsY0FBOEIsRUFDOUIsV0FBd0IsRUFDeEIsbUJBQXdDLEVBQ3hDLGFBQW1DLEVBQ25DLGdCQUFrQyxFQUNsQyxlQUFnQyxFQUNoQyxvQkFBMEM7UUFYMUMsWUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNmLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQ3ZCLGNBQVMsR0FBVCxTQUFTLENBQWtCO1FBQzFCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5Qiw2QkFBd0IsR0FBeEIsd0JBQXdCLENBQTBCO1FBQ2xELG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4Qix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBQ3hDLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUNuQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUNoQyx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXNCO1FBQzFELElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFFRCxRQUFRO1FBQ0osSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDaEMsSUFBSSxDQUFDLFlBQVksYUFBYSxFQUFFO2dCQUM1QixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO29CQUNsRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztpQkFDL0I7Z0JBQ0QsSUFBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFDO29CQUM3RSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztpQkFDOUI7cUJBQUk7b0JBQ0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7aUJBQy9CO2FBQ0o7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUM7YUFDOUMsU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDbkIsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDbkUsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUMsSUFBSSxZQUFZLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxZQUFZLENBQUMsSUFBSSxFQUFFO2dCQUNqRSxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixFQUFFLENBQUM7YUFDMUM7aUJBQU0sSUFBSSxDQUFDLFlBQVksRUFBRTtnQkFDdEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2FBQzFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFUCxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELFdBQVcsQ0FBQyxPQUFPO1FBQ2YsSUFBSSxPQUFPLENBQUMsaUJBQWlCLElBQUksT0FBTyxDQUFDLGlCQUFpQixDQUFDLFlBQVksS0FBSyxTQUFTLEVBQUU7WUFDbkYsSUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDO1NBQzlEO0lBQ0wsQ0FBQztJQUVELHNCQUFzQjtRQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNwQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7U0FDdEM7SUFDTCxDQUFDO0lBRUQsb0JBQW9CLENBQUMsS0FBSyxFQUFFLElBQUk7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7UUFDekIsSUFBSSxDQUFDLGNBQWMsQ0FBQyw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RCxxQ0FBcUM7UUFDckMsa0JBQWtCO0lBQ3RCLENBQUM7SUFFRCxjQUFjO1FBQ1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxnQkFBZ0I7UUFDWixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUNsRSxJQUFJLFVBQVUsQ0FBQyxRQUFRLEtBQUssS0FBSyxFQUFFO1lBQy9CLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1NBQzVCO0lBQ0wsQ0FBQztJQUVELGdCQUFnQjtRQUNaLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLElBQUksVUFBVSxDQUFDLFFBQVEsS0FBSyxNQUFNLEVBQUU7WUFDaEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FDM0I7SUFDTCxDQUFDO0lBRUQsV0FBVztRQUNQLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQ25FLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDZixJQUFJLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFO2dCQUNoRSxJQUFJLFdBQVcsRUFBRTtvQkFDYixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztvQkFDckIsSUFBSSxDQUFDLGFBQWEsR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDO29CQUMzQyxJQUFJLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUM7aUJBQzVDO3FCQUFNO29CQUNILElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO2lCQUN6QjtZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ047YUFBTTtZQUNILElBQUksSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRTtnQkFDaEYsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7Z0JBQ3JCLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQztnQkFDNUMsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQzdDO2lCQUFNO2dCQUNILElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO2FBQ3pCO1NBRUo7SUFDTCxDQUFDO0lBRUQsTUFBTTtRQUNGLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2Qjs7OztXQUlHO1FBQ0gsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBRUQsaUJBQWlCO1FBQ2IsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO1FBQzFGLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCxPQUFPO1FBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxnQkFBZ0IsR0FBRztZQUMvQyxPQUFPLEtBQUssQ0FBQztRQUNqQixDQUFDLENBQUM7UUFDRixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDMUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO2FBQ2pDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDUCxNQUFNLFdBQVcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1lBQy9CLFlBQVksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQzVELElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDL0IsSUFBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUM7Z0JBQ3pDLElBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLHNCQUFzQixDQUFDLEVBQUM7b0JBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO2lCQUNuRDtnQkFDRCxJQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztvQkFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO2lCQUN4QzthQUNKO2lCQUFLO2dCQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQzdDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDWCxDQUFDO0lBRUQsZUFBZTtRQUNYLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLGFBQWEsRUFBRTtZQUNyQyxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtnQkFDakQsSUFBSSxLQUFLLEtBQUssa0JBQWtCLEVBQUU7b0JBQzlCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2lCQUMzQjtZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ047YUFBTTtZQUNILElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQzNCO0lBQ0wsQ0FBQztJQUVELGdCQUFnQjtRQUNaLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhLENBQUM7UUFDdkQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUN6RCxDQUFDOzs7WUEvTEosU0FBUyxTQUFDO2dCQUNQLFFBQVEsRUFBRSxpQkFBaUI7Z0JBQzNCLCtsS0FBMkM7O2FBRTlDOzs7WUFoQnNCLE1BQU07WUFBRSxjQUFjO1lBQ3JDLGdCQUFnQjtZQUNoQixjQUFjO1lBQ2Qsd0JBQXdCO1lBQ3hCLGNBQWM7WUFDZCxXQUFXO1lBQ1gsbUJBQW1CO1lBQ25CLG9CQUFvQjtZQUNwQixnQkFBZ0I7WUFDaEIsZUFBZTtZQUNmLG9CQUFvQjs7O3NCQXFCdkIsS0FBSzs0QkFDTCxLQUFLO3dCQUNMLEtBQUs7MkJBQ0wsS0FBSzs0QkFDTCxLQUFLOzZCQUNMLEtBQUs7Z0NBQ0wsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBJbnB1dCwgT25DaGFuZ2VzLCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOYXZpZ2F0aW9uRW5kLCBSb3V0ZXIsIEFjdGl2YXRlZFJvdXRlfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtUcmFuc2xhdGVTZXJ2aWNlfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7UnhTdG9tcFNlcnZpY2V9IGZyb20gJ0BzdG9tcC9uZzItc3RvbXBqcyc7XG5pbXBvcnQge0NvbW1vblRyYW5zbGF0aW9uU2VydmljZX0gZnJvbSAnLi4vLi4vY29tbW9uLXRyYW5zbGF0aW9uL2NvbW1vbi10cmFuc2xhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7VXRpbGl0eVNlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3V0aWxpdHkuc2VydmljZSc7XG5pbXBvcnQge0F1dGhTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9BdXRoZW50aWNhdGlvbi9hdXRoLnNlcnZpY2UnO1xuaW1wb3J0IHtEZWNvZGVkVG9rZW5TZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9BdXRoZW50aWNhdGlvbi9kZWNvZGVkLXRva2VuLnNlcnZpY2UnO1xuaW1wb3J0IHtMb2dvdXRVdGlsaXR5U2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvbG9nb3V0LXV0aWxpdHkuc2VydmljZSc7XG5pbXBvcnQge1RvcE5hdkJhclNlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3RvcC1uYXYtYmFyLnNlcnZpY2UnO1xuaW1wb3J0IHtUb3BvbG9neVNlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3RvcG9sb2d5LnNlcnZpY2UnO1xuaW1wb3J0IHtUb2tlbkhhbmRsaW5nU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvQXV0aGVudGljYXRpb24vdG9rZW4taGFuZGxpbmcuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYXBwLXRvcC1uYXYtYmFyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdG9wLW5hdi1iYXIuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3RvcC1uYXYtYmFyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgVG9wTmF2QmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuICAgIGxhc3RSZWZyZXNoOiBzdHJpbmc7XG4gICAgdXNlckZpcnN0TmFtZTogc3RyaW5nO1xuICAgIHVzZXJMYXN0TmFtZTogc3RyaW5nO1xuICAgIHRvcG9sb2d5RGF0YTtcbiAgICBjb21wYW55TmFtZTtcbiAgICAvL2dhbWluZ0RheXNBcnI6IEFycmF5PHN0cmluZz47XG4gICAgY2FsZW5kYXJEYXRlO1xuICAgIC8vc2VsZWN0ZWRDYWxlbmRhckRhdGU7XG4gICAgaGlkZUxhbmd1YWdlOiBCb29sZWFuO1xuICAgIGlzQ29uZmlnQXBwOiBCb29sZWFuO1xuICAgIHNob3dNZW51OiBCb29sZWFuO1xuICAgIGhpZGVBcHBTd2l0Y2hlcjogYm9vbGVhbjtcbiAgICBsb2dpblBhZ2VzRmxhZzogYm9vbGVhbjtcbiAgICBASW5wdXQoKSBhcHBOYW1lOiBzdHJpbmc7XG4gICAgQElucHV0KCkgc2hvd0dhbWluZ0RheTogYm9vbGVhbjtcbiAgICBASW5wdXQoKSBnYW1pbmdEYXk6IHN0cmluZztcbiAgICBASW5wdXQoKSBuZXh0Um9sbFRJbWU7XG4gICAgQElucHV0KCkgZ2FtaW5nRGF5c0FycjtcbiAgICBASW5wdXQoKSBicmVhZGNydW1iTGlzdDtcbiAgICBASW5wdXQoKSBzZWxlY3RlZEdhbWluZ0RheTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3JvdXRlcjogUm91dGVyLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgX3JvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgcnhTdG9tcFNlcnZpY2U6IFJ4U3RvbXBTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY29tbW9uVHJhbnNsYXRpb25TZXJ2aWNlOiBDb21tb25UcmFuc2xhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB1dGlsaXR5U2VydmljZTogVXRpbGl0eVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBhdXRoU2VydmljZTogQXV0aFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBkZWNvZGVkVG9rZW5TZXJ2aWNlOiBEZWNvZGVkVG9rZW5TZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgbG9nb3V0U2VydmljZTogTG9nb3V0VXRpbGl0eVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0b3BOYXZCYXJTZXJ2aWNlOiBUb3BOYXZCYXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgdG9wb2xvZ3lTZXJ2aWNlOiBUb3BvbG9neVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0b2tlbkhhbmRsaW5nU2VydmljZTogVG9rZW5IYW5kbGluZ1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5nZXRDdXJyZW50Q2FsZW5kYXJEYXRlKCk7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuX3JvdXRlci5ldmVudHMuc3Vic2NyaWJlKChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcm91dGVyLnVybC5pbmNsdWRlcygndW5hdXRob3JpemVkLWFjY2VzcycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUFwcFN3aXRjaGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy5fcm91dGVyLnVybC5pbmNsdWRlcygnL3BwbWFzdGVyJykgfHwgdGhpcy5fcm91dGVyLnVybC5pbmNsdWRlcygnL2xvZ2luJykpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2luUGFnZXNGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dpblBhZ2VzRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5nZXRMYXN0UmVmcmVzaCgpO1xuICAgICAgICB0aGlzLmdldFVzZXJOYW1lKCk7XG4gICAgICAgIHRoaXMucnhTdG9tcFNlcnZpY2Uud2F0Y2goJy9sb2dvdXQvbG9nb3V0LXJlcXVlc3QnKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRUb2tlbiA9IHRoaXMuZGVjb2RlZFRva2VuU2VydmljZS5nZXREZWNvZGVkSnd0VG9rZW4oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IG1lc3NhZ2UuYm9keS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlY29kZWRUb2tlbiAmJiBtZXNzYWdlRGF0YS5zcGxpdCgnOycpWzBdID09PSBkZWNvZGVkVG9rZW4ubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ291dFNlcnZpY2UucmVtb3ZlQW5kUmVkaXJlY3QoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFkZWNvZGVkVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dvdXRTZXJ2aWNlLnJlbW92ZUFuZFJlZGlyZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oaWRlTGFuZ3VhZ2VNZW51KCk7XG4gICAgICAgIHRoaXMuY2hlY2tJZkNvbmZpZ0FwcCgpO1xuICAgICAgICB0aGlzLmdldFRvcG9sb2d5RGF0YSgpO1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpOiB2b2lkIHtcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0ZWRHYW1pbmdEYXkgJiYgY2hhbmdlcy5zZWxlY3RlZEdhbWluZ0RheS5jdXJyZW50VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jYWxlbmRhckRhdGUgPSBjaGFuZ2VzLnNlbGVjdGVkR2FtaW5nRGF5LmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEN1cnJlbnRDYWxlbmRhckRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYWxlbmRhckRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJEYXRlID0gdGhpcy5nYW1pbmdEYXk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRDYWxlbmRhckdhbWluZ0RheShpbmRleCwgZ2RheSkge1xuICAgICAgICB0aGlzLmNhbGVuZGFyRGF0ZSA9IGdkYXk7XG4gICAgICAgIHRoaXMudXRpbGl0eVNlcnZpY2UudXBkYXRlR2xvYmFsQ2FsZW5kYXJHYW1pbmdEYXkoZ2RheSk7XG4gICAgICAgIC8vIHRoaXMuc2VsZWN0ZWRDYWxlbmRhckRhdGUgPSBpbmRleDtcbiAgICAgICAgLy8gdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgZ2V0TGFzdFJlZnJlc2goKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGFzdFJlZnJlc2ggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdFJlZnJlc2gnKTtcbiAgICB9XG5cbiAgICBoaWRlTGFuZ3VhZ2VNZW51KCkge1xuICAgICAgICBjb25zdCBhdXRoVmFsdWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFZhbHVlcycpKTtcbiAgICAgICAgaWYgKGF1dGhWYWx1ZXMuY2xpZW50SWQgPT09ICdsZ24nKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVMYW5ndWFnZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVja0lmQ29uZmlnQXBwKCkge1xuICAgICAgICBjb25zdCBhdXRoVmFsdWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFZhbHVlcycpKTtcbiAgICAgICAgaWYgKGF1dGhWYWx1ZXMuY2xpZW50SWQgPT09ICdjb25mJykge1xuICAgICAgICAgICAgdGhpcy5pc0NvbmZpZ0FwcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRVc2VyTmFtZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZGVjb2RlZFRva2VuID0gdGhpcy5kZWNvZGVkVG9rZW5TZXJ2aWNlLmdldERlY29kZWRKd3RUb2tlbigpO1xuICAgICAgICBpZiAoIWRlY29kZWRUb2tlbikge1xuICAgICAgICAgICAgdGhpcy50b3BOYXZCYXJTZXJ2aWNlLnVzZXJEZXRhaWxzT2JzZXJ2YWJsZS5zdWJzY3JpYmUodXNlckRldGFpbHMgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyRGV0YWlscykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dNZW51ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyRmlyc3ROYW1lID0gdXNlckRldGFpbHMuZmlyc3ROYW1lO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJMYXN0TmFtZSA9IHVzZXJEZXRhaWxzLmxhc3ROYW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRva2VuSGFuZGxpbmdTZXJ2aWNlLmlzVG9rZW5WYWxpZCh0aGlzLmRlY29kZWRUb2tlblNlcnZpY2UuZ2V0Snd0VG9rZW4oKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZW51ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJGaXJzdE5hbWUgPSBkZWNvZGVkVG9rZW4uZmlyc3ROYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMudXNlckxhc3ROYW1lID0gZGVjb2RlZFRva2VuLmxhc3ROYW1lO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvZ291dCgpOiB2b2lkIHtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGxvY2FsU3RvcmFnZS5jbGVhcigpOy8vR1ItMjkwMyBjb21lcyBkdWUgdG8gR1ItMjc3NzogaXQgc3RvcCByZWRpcmVjdGlvbiBiZWNhdXNlXG4gICAgICAgICByZW1vdmVBbmRSZWRpcmVjdCBmdW5jdGlvbiBkb2VzIG5vdCBoYXZlIHZhbHVlIG9mIGxvY2Fsc3RvcmFnZSwgc28gaW5zdGVhZFxuICAgICAgICAgd2UgY2FuIGNsZWFyICdsYXN0UmVmcmVzaCcgaW4gdGhlIHJlbW92ZUFuZFJlZGlyZWN0IGluIExvZ291dFV0aWxpdHlTZXJ2aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sb2dvdXRTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cblxuICAgIHRvZ2dsZVRyYW5zbGF0aW9uKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB0aGlzLnRyYW5zbGF0ZS5nZXREZWZhdWx0TGFuZygpID09PSAnZW5fVVMnID8gJ3poX0hhbnQnIDogJ2VuX1VTJztcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbGFuZ3VhZ2UnLCBjdXJyZW50TGFuZ3VhZ2UpO1xuICAgICAgICB0aGlzLmNvbW1vblRyYW5zbGF0aW9uU2VydmljZS5sYW5ndWFnZUNoYW5nZWQubmV4dChjdXJyZW50TGFuZ3VhZ2UpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZS5zZXREZWZhdWx0TGFuZyhjdXJyZW50TGFuZ3VhZ2UpO1xuICAgIH1cblxuICAgIHJlZnJlc2goKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3JvdXRlci5yb3V0ZVJldXNlU3RyYXRlZ3kuc2hvdWxkUmV1c2VSb3V0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY3VycmVudFVybCA9IHRoaXMuX3JvdXRlci51cmwgKyAnPyc7XG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZUJ5VXJsKGN1cnJlbnRVcmwpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYXN0UmVmcmVzaCcsIGN1cnJlbnRUaW1lLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGFzdFJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5fcm91dGVyLnVybC5pbmNsdWRlcygnYWNjZXNzX3Rva2VuJykpe1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLl9yb3V0ZXIudXJsLmluY2x1ZGVzKCcvY29uZmlndXJhdGlvbi9hcmVhcycpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9jb25maWd1cmF0aW9uL2FyZWFzJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuX3JvdXRlci51cmwuaW5jbHVkZXMoJy9vdmVydmlldycpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9vdmVydmlldyddKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFt0aGlzLl9yb3V0ZXIudXJsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VG9wb2xvZ3lEYXRhKCkge1xuICAgICAgICBpZiAoIXRoaXMudG9wb2xvZ3lTZXJ2aWNlLnRvcG9sb2d5Tm9kZXMpIHtcbiAgICAgICAgICAgIHRoaXMudG9wb2xvZ3lTZXJ2aWNlLmluaXRpYWxpemVkLnN1YnNjcmliZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdub2Rlc0luaXRpYWxpemVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRUb3BvbG9neURhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFRvcG9sb2d5RGF0YSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdFRvcG9sb2d5RGF0YSgpIHtcbiAgICAgICAgdGhpcy50b3BvbG9neURhdGEgPSB0aGlzLnRvcG9sb2d5U2VydmljZS50b3BvbG9neU5vZGVzO1xuICAgICAgICB0aGlzLmNvbXBhbnlOYW1lID0gdGhpcy50b3BvbG9neURhdGFbMF1bMF0uc2hvcnROYW1lO1xuICAgIH1cbn1cbiJdfQ==